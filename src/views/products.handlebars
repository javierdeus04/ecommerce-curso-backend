<nav>
    <ul>
        <li><strong style="font-size: xx-large"><a href="/products">MoviEcommerce</a></strong></li>
    </ul>
    <ul>
        {{#if userDTO}}
        <li><button id="become-premium-button"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36"
                    fill="currentColor" class="bi bi-stars" viewBox="0 0 16 16">
                    <path
                        d="M7.657 6.247c.11-.33.576-.33.686 0l.645 1.937a2.89 2.89 0 0 0 1.829 1.828l1.936.645c.33.11.33.576 0 .686l-1.937.645a2.89 2.89 0 0 0-1.828 1.829l-.645 1.936a.361.361 0 0 1-.686 0l-.645-1.937a2.89 2.89 0 0 0-1.828-1.828l-1.937-.645a.361.361 0 0 1 0-.686l1.937-.645a2.89 2.89 0 0 0 1.828-1.828zM3.794 1.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387A1.73 1.73 0 0 0 4.593 5.69l-.387 1.162a.217.217 0 0 1-.412 0L3.407 5.69A1.73 1.73 0 0 0 2.31 4.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387A1.73 1.73 0 0 0 3.407 2.31zM10.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732L9.1 2.137a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z" />
                </svg> PREMIUM</button></li>
        <li>
            <a href="/carts/current"><button><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36"
                        fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                        <path
                            d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2" />
                    </svg></button></a>
        </li>
        <li><button id="logout-button"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36"
                    fill="currentColor" class="bi bi-door-open" viewBox="0 0 16 16">
                    <path d="M8.5 10c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1" />
                    <path
                        d="M10.828.122A.5.5 0 0 1 11 .5V1h.5A1.5 1.5 0 0 1 13 2.5V15h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117zM11.5 2H11v13h1V2.5a.5.5 0 0 0-.5-.5M4 1.934V15h6V1.077z" />
                </svg></button></li>
        {{/if}}
        {{#if userAdmin}}
        <li><button id="logout-button"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36"
                    fill="currentColor" class="bi bi-door-open" viewBox="0 0 16 16">
                    <path d="M8.5 10c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1" />
                    <path
                        d="M10.828.122A.5.5 0 0 1 11 .5V1h.5A1.5 1.5 0 0 1 13 2.5V15h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117zM11.5 2H11v13h1V2.5a.5.5 0 0 0-.5-.5M4 1.934V15h6V1.077z" />
                </svg></button></li>
        {{/if}}
        {{#unless user}}
        <a href="/login">
            <li><button><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor"
                        class="bi bi-door-closed" viewBox="0 0 16 16">
                        <path
                            d="M3 2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v13h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3zm1 13h8V2H4z" />
                        <path d="M9 9a1 1 0 1 0 2 0 1 1 0 0 0-2 0" />
                    </svg></button></li>
        </a>
        {{/unless}}
    </ul>
</nav>
{{#if userDTO}}
<div>
    <h2>Bienvenido {{userDTO.first_name}} {{userDTO.last_name}}</h2>
    <a href="/users/current" style="text-decoration: none;">
        <svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" fill="currentColor" class="bi bi-person-circle"
            viewBox="0 0 16 16">
            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
            <path fill-rule="evenodd"
                d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1" />
        </svg>
        <span>Rol: {{userDTO.role}}</span>
    </a>
</div>

{{/if}}
<ul>
    {{#if userAdmin }}
    <h2>Bienvenido {{userAdmin.first_name}} {{userAdmin.last_name}}</h2>
    {{/if}}
</ul>
{{#if userAdmin }}
<button><a href="/new-product" style="color: whitesmoke;">Agregar producto</a></button>
<button><a href="/users" style="color: whitesmoke;">Lista de usuarios</a></button>
{{/if}}
<article>
    <h1>Productos</h1>
    <ul>
        <li style="display: inline-block"><button class="outline"><a href="{{baseUrl}}/products">Inicio</a></button>
        </li>
        <li style="display: inline-block"><button class="outline"><a
                    href="{{baseUrl}}/products?limit=10&page=1&stock=true">Mostrar solo productos en stock</a></button>
        </li>
        <li style="list-style: none">
            <details class="dropdownn">
                <summary role="button" class="outline">Categoria</summary>
                <ul>
                    <li style="display: inline-block"><a
                            href="{{baseUrl}}/products?limit=10&page={{page}}&search=Action">| Accion |</a></li>
                    <li style="display: inline-block"><a
                            href="{{baseUrl}}/products?limit=10&page={{page}}&search=Adventure">Aventura |</a></li>
                    <li style="display: inline-block"><a
                            href="{{baseUrl}}/products?limit=10&page={{page}}&search=Comedy">Comedia |</a></li>
                    <li style="display: inline-block"><a
                            href="{{baseUrl}}/products?limit=10&page={{page}}&search=Animation">Animacion |</a></li>
                    <li style="display: inline-block"><a
                            href="{{baseUrl}}/products?limit=10&page={{page}}&search=Crime">Crimen |</a></li>
                    <li style="display: inline-block"><a
                            href="{{baseUrl}}/products?limit=10&page={{page}}&search=Documentary">Documental |</a></li>
                    <li style="display: inline-block"><a
                            href="{{baseUrl}}/products?limit=10&page={{page}}&search=Drama">Drama |</a></li>
                    <li style="display: inline-block"><a
                            href="{{baseUrl}}/products?limit=10&page={{page}}&search=Children">Ni√±os |</a></li>
                    <li style="display: inline-block"><a
                            href="{{baseUrl}}/products?limit=10&page={{page}}&search=Romance">Romance |</a></li>
                    <li style="display: inline-block"><a
                            href="{{baseUrl}}/products?limit=10&page={{page}}&search=Horror">Terror |</a></li>
                    <li style="display: inline-block"><a
                            href="{{baseUrl}}/products?limit=10&page={{page}}&search=Thriller">Thriller |</a>
                    </li>
                </ul>
            </details>
        </li>
    </ul>
    <table>
        <tr>
            <th>Titulo</th>
            <th>Categoria</th>
            <th>Precio<br>
                <a href="{{baseUrl}}/products?limit=10&page={{page}}&search={{search}}&sort=asc">
                    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor"
                        class="bi bi-arrow-down" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1" />
                    </svg>
                </a>
                <a href="{{baseUrl}}/products?limit=10&page={{page}}&search={{search}}&sort=desc">
                    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor"
                        class="bi bi-arrow-up" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5" />
                    </svg>
                </a>
            </th>
            <th>Codigo</th>
            <th>Stock</th>
        </tr>
        <tbody>
            {{#each payload}}
            <tr>
                <td>{{this.title}}</td>
                <td>{{this.category}}</td>
                <td>{{this.price}}</td>
                <td>{{this.code}}</td>
                <td>{{this.stock}}</td>
                <td><button class="detail-button" data-pid="{{this._id}}"><svg xmlns="http://www.w3.org/2000/svg"
                            width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
                            <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z" />
                            <path
                                d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z" />
                        </svg></button></td>
                <td><button class="add-to-cart-button" data-pid="{{this._id}}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-cart" viewBox="0 0 16 16">
                            <path
                                d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2" />
                        </svg></button></td>
            </tr>
            {{/each}}
        </tbody>
    </table>

    <a href="{{prevLink}}" role="button" {{#unless hasPrevPage}}disabled{{/unless}} class="pagination-link">Anterior</a>
    <p role="button" disabled>Pagina actual: {{page}}</p>
    <a href="{{nextLink}}" role="button" {{#unless hasNextPage}}disabled{{/unless}}
        class="pagination-link">Siguiente</a>
</article>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
{{#unless user}}
<script type="module" src="js/products/products.public.js"></script>
{{/unless}}
{{#if userAdmin}}
<script type="module" src="/js/products/products.admin.public.js"></script>
{{/if}}
{{#if userDTO}}
<script type="module" src="/js/products/products.user.public.js"></script>
{{/if}}